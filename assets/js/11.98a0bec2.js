(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{432:function(e,t,n){e.exports=n.p+"assets/img/LightningNetworkNodeSetup1.c48bfb0b.jpg"},433:function(e,t,n){e.exports=n.p+"assets/img/LightningNetworkNodeSetup2.50b4bc2b.jpg"},434:function(e,t,n){e.exports=n.p+"assets/img/LightningNetworkNodeSetup3.ab5efa41.jpg"},435:function(e,t,n){e.exports=n.p+"assets/img/LightningNetworkNodeSetup4.7b6d391c.jpg"},436:function(e,t,n){e.exports=n.p+"assets/img/RideTheLightning.b51de51a.png"},437:function(e,t,n){e.exports=n.p+"assets/img/RideTheLightningServices.bdcf7e22.png"},438:function(e,t,n){e.exports=n.p+"assets/img/SparkConnect.c32564ac.jpg"},439:function(e,t,n){e.exports=n.p+"assets/img/SparkConnect2.jpg.38b90d2b.png"},554:function(e,t,n){"use strict";n.r(t);var a=n(26),o=Object(a.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"lightning-network-and-btcpay"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lightning-network-and-btcpay"}},[e._v("#")]),e._v(" Lightning Network and BTCPay")]),e._v(" "),a("p",[e._v("After deploying BTCPay Server, you may want to experiment with an innovative second-layer payment system built on top of Bitcoin protocol - the "),a("a",{attrs:{href:"https://en.bitcoin.it/wiki/Lightning_Network",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lightning Network"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("This guide will show you how to set up your Lightning Network node in BTCPay and guide you through the basics.")]),e._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[a("strong",[e._v("Before you proceed, please understand that Lightning Network is still in the experimental stage. Do not put the money you can't afford to lose. There is a high risk of you losing the money.")])])]),e._v(" "),a("p",[e._v("Take time to familiarize yourself with the risk.\n"),a("strong",[e._v("There's no backup for LND or c-lightning keys in BTCPay. Your keys are in a hot-wallet")]),e._v(". This means :")]),e._v(" "),a("ol",[a("li",[e._v("If you erase your BTCPay Server or your machine crashes - you lose all the funds.")]),e._v(" "),a("li",[e._v("If your server gets hacked - a hacker can take all of your funds by accessing your keys.")])]),e._v(" "),a("p",[e._v("While the keys from your Lightning Network don't have a backup and someone can steal them theoretically, your on-chain Bitcoin funds are safe and are never uploaded on the server.")]),e._v(" "),a("p",[e._v("As the technology matures and develops, things like a proper backup will be easier to implement in BTCPay.")]),e._v(" "),a("p",[e._v("BTCPay currently offers two implementations of the Lightning Network:")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/lightningnetwork/lnd",target:"_blank",rel:"noopener noreferrer"}},[e._v("LND"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/ElementsProject/lightning",target:"_blank",rel:"noopener noreferrer"}},[e._v("c-lightning"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"choosing-the-lightning-network-implementation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#choosing-the-lightning-network-implementation"}},[e._v("#")]),e._v(" Choosing the Lightning Network implementation")]),e._v(" "),a("p",[e._v("On the installation, you'll have the option to choose the implementation. For "),a("RouterLink",{attrs:{to:"/LunaNodeWebDeployment.html"}},[e._v("web-interface installations")]),e._v(", you can simply select the implementation from the drop-down menu. For "),a("a",{attrs:{href:"https://github.com/btcpayserver/btcpayserver-docker",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker"),a("OutboundLink")],1),e._v(" you need to :")],1),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('sudo su -\ncd btcpayserver-docker\nexport BTCPAYGEN_LIGHTNING="implementationgoeshere"\n. ./btcpay-setup.sh -i\n')])])]),a("p",[e._v("For c-lightning use "),a("code",[e._v('export BTCPAYGEN_LIGHTNING="clightning"')]),e._v("\nFor LND use "),a("code",[e._v('export BTCPAYGEN_LIGHTNING="lnd"')])]),e._v(" "),a("p",[e._v("To begin using Lightning, your blockchain needs to be fully synced.")]),e._v(" "),a("h2",{attrs:{id:"connecting-your-internal-lightning-node-in-btcpay"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#connecting-your-internal-lightning-node-in-btcpay"}},[e._v("#")]),e._v(" Connecting your internal Lightning Node in BTCPay")]),e._v(" "),a("p",[e._v("Regardless of the implementation (c-lightning or LND) you've decided to use, the process of connecting your internal Lightning Node in BTCPay Server is the same.")]),e._v(" "),a("ol",[a("li",[e._v("If you do not have a store, create one.")]),e._v(" "),a("li",[e._v("Store Settings > General Settings > Lightning Network Experimental (located at the bottom of the page, scroll)")]),e._v(" "),a("li",[e._v("Under Crypto tab, select cryptocurrency > Modify.")]),e._v(" "),a("li",[e._v('At the next page, at the bottom under "connection string", click on the "click here" link. Your node information will be automatically added.')]),e._v(" "),a("li",[e._v("Enable. Submit.")]),e._v(" "),a("li",[e._v("Test Connection.")])]),e._v(" "),a("p",[a("strong",[e._v(" Your blockchain needs to be fully synced before you try to connect your Lightning Node, otherwise the connection will fail.")])]),e._v(" "),a("figure",[a("img",{attrs:{src:n(432),alt:"LightningNetworkSettup1"}})]),e._v(" "),a("figure",[a("img",{attrs:{src:n(433),alt:"LightningNetworkSettup2"}})]),e._v(" "),a("figure",[a("img",{attrs:{src:n(434),alt:"LightningNetworkSettup3"}})]),e._v(" "),a("figure",[a("img",{attrs:{src:n(435),alt:"LightningNetworkSettup4"}})]),e._v(" "),a("h2",{attrs:{id:"getting-started-with-btcpay-and-lnd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getting-started-with-btcpay-and-lnd"}},[e._v("#")]),e._v(" Getting Started with BTCPay and LND")]),e._v(" "),a("p",[e._v("The easiest way to use LND implementation with BTCPay is to use "),a("a",{attrs:{href:"https://github.com/ShahanaFarooqui/RTL",target:"_blank",rel:"noopener noreferrer"}},[e._v("Ride The Lightning"),a("OutboundLink")],1),e._v(" (RTL).")]),e._v(" "),a("figure",[a("img",{attrs:{src:n(436),alt:"RideTheLightningServices"}})]),e._v(" "),a("p",[e._v("RTL is a device agnostic web user interface for Lightning Network that allows you to operate your node without leaving BTCPay, from your browser.")]),e._v(" "),a("figure",[a("img",{attrs:{src:n(437),alt:"RideTheLightningServices"}})]),e._v(" "),a("p",[e._v("To initiate RTL in BTCPay, Go to "),a("strong",[e._v("Server Settings > Services > RTL > See information")]),e._v(".")]),e._v(" "),a("p",[e._v("Read the "),a("a",{attrs:{href:"https://medium.com/@suheb.khan/how-to-ride-the-lightning-447af999dcd2",target:"_blank",rel:"noopener noreferrer"}},[e._v("RTL Getting Started Guide"),a("OutboundLink")],1),e._v(" for more details.")]),e._v(" "),a("p",[e._v("For remote use of your LND node on iOS or PC, you can use "),a("a",{attrs:{href:"https://github.com/LN-Zap/zap-tutorials/blob/master/docs/desktop/btcpay-server.mdx",target:"_blank",rel:"noopener noreferrer"}},[e._v("Zap wallet integration"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("div",{staticClass:"ytEmbed",staticStyle:{"background-image":"url(https://img.youtube.com/vi/CWhTOunTb2Q/hqdefault.jpg)"},attrs:{"data-id":"CWhTOunTb2Q"}},[a("iframe",{attrs:{title:"YouTube: BTCPay Server - LND and Zap","data-src":"https://www.youtube-nocookie.com/embed/CWhTOunTb2Q?&autoplay=1&autohide=1&modestbranding=1&color=white&rel=0",frameborder:"0",allow:"autoplay;encrypted-media;picture-in-picture",allowfullscreen:""}})]),e._v(" "),a("p",[e._v("Besides Zap, there are a few more wallets that allow remote control of the LND node, "),a("a",{attrs:{href:"https://nayuta.co/",target:"_blank",rel:"noopener noreferrer"}},[e._v("the Nayuta wallet"),a("OutboundLink")],1),e._v(" and the "),a("a",{attrs:{href:"https://github.com/ZeusLN/zeus",target:"_blank",rel:"noopener noreferrer"}},[e._v("ZeusLN"),a("OutboundLink")],1),e._v(". Both of which have not yet extensively been tested by the community.")]),e._v(" "),a("p",[e._v("To remotely control your LND node via web browser, you can use Lightning Joule.")]),e._v(" "),a("div",{staticClass:"ytEmbed",staticStyle:{"background-image":"url(https://img.youtube.com/vi/a9_uHJhnKR4/hqdefault.jpg)"},attrs:{"data-id":"a9_uHJhnKR4"}},[a("iframe",{attrs:{title:"YouTube: BTCPay Server - LND and Joule","data-src":"https://www.youtube-nocookie.com/embed/a9_uHJhnKR4?&autoplay=1&autohide=1&modestbranding=1&color=white&rel=0",frameborder:"0",allow:"autoplay;encrypted-media;picture-in-picture",allowfullscreen:""}})]),e._v(" "),a("h3",{attrs:{id:"lnd-commands-lncli"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lnd-commands-lncli"}},[e._v("#")]),e._v(" LND Commands lncli")]),e._v(" "),a("p",[e._v("You can use lncli commands like described in their "),a("a",{attrs:{href:"https://api.lightning.community/",target:"_blank",rel:"noopener noreferrer"}},[e._v("API docs"),a("OutboundLink")],1),e._v(" but instead of using lncli you use the shell script in of the btcpayserver-docker repository calles bitcoin-lncli.sh.")]),e._v(" "),a("p",[e._v("If you're on Docker make sure you're in docker directory.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("su")]),e._v(" -\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" btcpayserver-docker\n./bitcoin-lncli.sh\n")])])]),a("p",[e._v("So instead of running lncli getinfo you would run "),a("code",[e._v("./bitcoin-lncli.sh getinfo")])]),e._v(" "),a("p",[e._v("Run "),a("code",[e._v("./bitcoin-lncli.sh --help")]),e._v(" to see a full list of commands or check above mentioned API docs.")]),e._v(" "),a("h2",{attrs:{id:"getting-started-with-btcpay-and-c-lightning"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getting-started-with-btcpay-and-c-lightning"}},[e._v("#")]),e._v(" Getting Started with BTCPay and c-lightning")]),e._v(" "),a("p",[e._v("The most straightforward way to start using the c-lightning implementation in BTCPay is to use "),a("a",{attrs:{href:"https://github.com/shesek/spark-wallet",target:"_blank",rel:"noopener noreferrer"}},[e._v("Spark Wallet"),a("OutboundLink")],1),e._v(" integration. Just like Zap for LND, Spark is a graphical interface of your internal c-lightning node.")]),e._v(" "),a("p",[e._v("You can use Spark as an internal or external wallet. Internal wallet allows users to use Spark via the web-browser inside their BTCPay Server. You can also connect externally to a Spark mobile or desktop app just by scanning a QR code.")]),e._v(" "),a("div",{staticClass:"ytEmbed",staticStyle:{"background-image":"url(https://img.youtube.com/vi/uV1R6IQpmg8/hqdefault.jpg)"},attrs:{"data-id":"uV1R6IQpmg8"}},[a("iframe",{attrs:{title:"YouTube: BTCPay Server - c-lightning and Spark","data-src":"https://www.youtube-nocookie.com/embed/uV1R6IQpmg8?&autoplay=1&autohide=1&modestbranding=1&color=white&rel=0",frameborder:"0",allow:"autoplay;encrypted-media;picture-in-picture",allowfullscreen:""}})]),e._v(" "),a("p",[e._v("Go to "),a("strong",[e._v("Server Settings > Services > Spark Server > See information")])]),e._v(" "),a("figure",[a("img",{attrs:{src:n(438),alt:"Accessing Spark wallet"}})]),e._v(" "),a("figure",[a("img",{attrs:{src:n(439),alt:"Accessing Spark wallet"}})]),e._v(" "),a("h3",{attrs:{id:"c-lightning-commands-lightning-cli"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#c-lightning-commands-lightning-cli"}},[e._v("#")]),e._v(" c-lightning Commands lightning-cli")]),e._v(" "),a("p",[e._v("To use clightning CLI it is the same like above for "),a("code",[e._v("lncli")]),e._v(" but instead you use the shell script "),a("code",[e._v("bitcoin-lightning-cli.sh")])]),e._v(" "),a("p",[e._v("If you're on Docker make sure you're in docker directory.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("su")]),e._v(" -\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" btcpayserver-docker\n./bitcoin-lightning-cli.sh\n")])])]),a("p",[e._v("E.g. to list all commands: "),a("code",[e._v("./bitcoin-lightning-cli.sh help")]),e._v("\nor show info about the node "),a("code",[e._v("./bitcoin-lightning-cli.sh getinfo")])]),e._v(" "),a("h3",{attrs:{id:"lapps-lightning-network-apps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lapps-lightning-network-apps"}},[e._v("#")]),e._v(" Lapps (Lightning Network Apps)")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://blockstream.com/2018/03/29/blockstreams-week-of-lapps-ends/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lapps"),a("OutboundLink")],1),e._v(" are applications built on top of the "),a("a",{attrs:{href:"https://blockstream.com/2018/01/16/lightning-charge/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lightning Charge"),a("OutboundLink")],1),e._v(", a complimentary package that allows users and developers to easier use and develop on top of c-lightning. If you decided to use c-lightning, you can easily connect your BTCPay to any of the Lapps.")]),e._v(" "),a("p",[e._v("BTCPay exposes all the necessary information required to connect your internal BTCPay c-lightning node to a Lightning Network App.  Go to Server Settings > Services > Lightning charge server > See information > Credentials.")]),e._v(" "),a("p",[e._v("Below are videos that showcase how to connect some of the lapps to your BTCPay.")]),e._v(" "),a("div",{staticClass:"ytEmbed",staticStyle:{"background-image":"url(https://img.youtube.com/vi/6EHNq1anD1k/hqdefault.jpg)"},attrs:{"data-id":"6EHNq1anD1k"}},[a("iframe",{attrs:{title:"YouTube: BTCPay Server - c-lightning and lapps intro","data-src":"https://www.youtube-nocookie.com/embed/6EHNq1anD1k?&autoplay=1&autohide=1&modestbranding=1&color=white&rel=0",frameborder:"0",allow:"autoplay;encrypted-media;picture-in-picture",allowfullscreen:""}})]),e._v(" "),a("div",{staticClass:"ytEmbed",staticStyle:{"background-image":"url(https://img.youtube.com/vi/ZbM3jcxau0o/hqdefault.jpg)"},attrs:{"data-id":"ZbM3jcxau0o"}},[a("iframe",{attrs:{title:"YouTube: BTCPay Server - c-lightning and lapps publisher","data-src":"https://www.youtube-nocookie.com/embed/ZbM3jcxau0o?&autoplay=1&autohide=1&modestbranding=1&color=white&rel=0",frameborder:"0",allow:"autoplay;encrypted-media;picture-in-picture",allowfullscreen:""}})]),e._v(" "),a("div",{staticClass:"ytEmbed",staticStyle:{"background-image":"url(https://img.youtube.com/vi/EYrsU3LGpbI/hqdefault.jpg)"},attrs:{"data-id":"EYrsU3LGpbI"}},[a("iframe",{attrs:{title:"YouTube: BTCPay Server - c-lightning and lapps woo lightning","data-src":"https://www.youtube-nocookie.com/embed/EYrsU3LGpbI?&autoplay=1&autohide=1&modestbranding=1&color=white&rel=0",frameborder:"0",allow:"autoplay;encrypted-media;picture-in-picture",allowfullscreen:""}})])])}),[],!1,null,null,null);t.default=o.exports}}]);